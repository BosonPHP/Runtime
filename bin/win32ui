#!/usr/bin/env php
<?php

declare(strict_types=1);

use Serafim\WinUI\Command\MakeAutocompleteCommand;
use Symfony\Component\Console\Application;

if (!isset($_composer_autoload_path)) {
    $current = __DIR__;
    do {
        if (is_file($current . '/autoload.php')) {
            $_composer_autoload_path = $current . '/autoload.php';
            break;
        } elseif (is_file($current . '/vendor/autoload.php')) {
            $_composer_autoload_path = $current . '/vendor/autoload.php';
            break;
        }
    } while ($current !== dirname($current) && ($current = dirname($current)));
}

if (!isset($_composer_autoload_path)) {
    throw new LogicException('Could not require Composer autoloader');
}

require $_composer_autoload_path;

if (!\class_exists(Application::class)) {
    throw new LogicException('Could not create console application: symfony/console package required');
}

$app = new Application();
$app->add(new MakeAutocompleteCommand());
exit($app->run());
